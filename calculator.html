<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Basic Calculator</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins&display=swap');
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0;
    background-color: #000000;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    font-family: 'Poppins', sans-serif;
  }
  .calculator {
    background-color: #000;
    border-radius: 1rem;
    padding: 20px 15px 20px 15px;
    width: 320px;
    user-select: none;
  }
  .display {
    color: #fff;
    font-size: 4rem;
    text-align: right;
    padding: 15px 10px 10px 10px;
    min-height: 70px;
    border-bottom: 1px solid #222;
  }
  .buttons {
    margin-top: 20px;
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    grid-gap: 15px;
  }
  button {
    background-color: #222;
    border: none;
    border-radius: 50%;
    color: #fff;
    font-size: 1.8rem;
    padding: 18px;
    cursor: pointer;
    box-shadow: none;
    transition: background-color 0.2s ease;
    user-select: none;
  }
  button:active {
    background-color: #555;
  }
  /* Special buttons */
  .btn-ac {
    background-color: #222;
  }
  .btn-percent {
    background-color: #222;
  }
  .btn-backspace {
    background-color: #222;
  }
  .btn-operator {
    font-size: 2.5rem;
  }
  button.equals {
    background-color: #A66949;
    color: white;
  }
  button.equals:active {
    background-color: #835337;
  }
</style>
</head>
<body>
  <div class="calculator">
    <div id="display" class="display">0</div>
    <div class="buttons">
      <button class="btn-ac" id="clear">AC</button>
      <button class="btn-percent" id="percent">%</button>
      <button class="btn-backspace" id="backspace">⌫</button>
      <button class="btn-operator" data-value="÷">÷</button>
      <button data-value="7">7</button>
      <button data-value="8">8</button>
      <button data-value="9">9</button>
      <button class="btn-operator" data-value="×">×</button>
      <button data-value="4">4</button>
      <button data-value="5">5</button>
      <button data-value="6">6</button>
      <button class="btn-operator" data-value="-">−</button>
      <button data-value="1">1</button>
      <button data-value="2">2</button>
      <button data-value="3">3</button>
      <button class="btn-operator" data-value="+">+</button>
      <button data-value="00">00</button>
      <button data-value="0">0</button>
      <button data-value=".">.</button>
      <button class="equals" id="equals">=</button>
    </div>
  </div>

<script>
  (function(){
    const display = document.getElementById('display');
    let currentInput = '0';
    let lastInput = '';
    let resetNext = false;

    const operators = ['+', '-', '×', '÷'];

    function updateDisplay() {
      display.textContent = currentInput;
    }

    function appendNumber(num) {
      if (resetNext) {
        currentInput = '0';
        resetNext = false;
      }
      if (currentInput === '0' && num !== '.') {
        if (num === '00') {
          // don't allow leading 00
          return;
        }
        currentInput = num;
      } else {
        // Prevent multiple '.' in a number
        if (num === '.' && currentInput.includes('.')) {
          return;
        }
        currentInput += num;
      }
    }

    function appendOperator(op) {
      if (resetNext) {
        resetNext = false;
      }
      if (currentInput === '') return;
      // Avoid two operators in a row
      const lastChar = currentInput.slice(-1);
      if (operators.includes(lastChar)) {
        currentInput = currentInput.slice(0,-1) + op;
      } else {
        currentInput += op;
      }
    }

    function clearAll() {
      currentInput = '0';
      resetNext = false;
    }

    function backspace() {
      if (resetNext) {
        currentInput = '0';
        resetNext = false;
        return;
      }
      if (currentInput.length > 1) {
        currentInput = currentInput.slice(0, -1);
      } else {
        currentInput = '0';
      }
    }

    function calculate() {
      let expression = currentInput;
      // Replace custom operators with JS operators
      expression = expression.replace(/×/g, '*').replace(/÷/g, '/').replace(/−/g, '-');

      try {
        let result = eval(expression);
        if (result === Infinity || result === -Infinity) {
          currentInput = 'Error';
        } else {
          currentInput = String(result);
        }
      } catch (e) {
        currentInput = 'Error';
      }
      resetNext = true;
    }

    function percent() {
      try {
        let expression = currentInput;
        expression = expression.replace(/×/g, '*').replace(/÷/g, '/').replace(/−/g, '-');
        let val = eval(expression);
        val = val / 100;
        currentInput = String(val);
        resetNext = true;
      } catch {
        currentInput = 'Error';
        resetNext = true;
      }
    }

    document.querySelectorAll('button').forEach(button => {
      button.addEventListener('click', () => {
        if (button.id === 'clear') {
          clearAll();
          updateDisplay();
          return;
        }
        if (button.id === 'backspace') {
          backspace();
          updateDisplay();
          return;
        }
        if (button.id === 'equals') {
          calculate();
          updateDisplay();
          return;
        }
        if (button.id === 'percent') {
          percent();
          updateDisplay();
          return;
        }
        const val = button.getAttribute('data-value');
        if (!val) {
          return; // safety check
        }
        if (operators.includes(val)) {
          appendOperator(val);
        } else {
          appendNumber(val);
        }
        updateDisplay();
      });
    });

    updateDisplay();
  })();
</script>
</body>
</html>
